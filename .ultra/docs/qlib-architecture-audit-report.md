# IQFMP æ¶æ„åˆè§„æ€§å®¡è®¡æŠ¥å‘Š

> **æ ¸å¿ƒåŸåˆ™**: Qlib æ˜¯å”¯ä¸€è®¡ç®—æ ¸å¿ƒï¼Œå…¶ä»–ç»„ä»¶éƒ½æ˜¯å›´ç»• Qlib çš„å¢å¼ºæ’ä»¶
>
> **å®¡è®¡æ—¥æœŸ**: 2025-12-20
> **å®¡è®¡èŒƒå›´**: å…¨éƒ¨ Python æºä»£ç  (~100+ æ–‡ä»¶)

---

## æ‰§è¡Œæ‘˜è¦

### æ€»ä½“è¯„åˆ†: 45/100 ğŸ”´ éœ€è¦ç«‹å³æ•´æ”¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IQFMP Qlib é›†æˆåº¦è¯„ä¼°                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ç†æƒ³æ¶æ„:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Multi-Agent Layer                        â”‚   â”‚
â”‚  â”‚  (LLM å¢å¼º: å› å­ç”Ÿæˆã€å‡è®¾éªŒè¯ã€ç­–ç•¥ç»„è£…)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              â˜… QLIB (å”¯ä¸€è®¡ç®—æ ¸å¿ƒ) â˜…                        â”‚   â”‚
â”‚  â”‚  â€¢ å› å­è®¡ç®—: Alpha è¡¨è¾¾å¼å¼•æ“                                â”‚   â”‚
â”‚  â”‚  â€¢ é£é™©åˆ†æ: risk_analysis()                                 â”‚   â”‚
â”‚  â”‚  â€¢ å›æµ‹å¼•æ“: Backtest                                        â”‚   â”‚
â”‚  â”‚  â€¢ æ•°æ®ç®¡ç†: DataHandler, D.features()                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Data Layer                                â”‚   â”‚
â”‚  â”‚  (ccxt: ä»…æ•°æ®ä¸‹è½½ â†’ TimescaleDB â†’ Qlib æ ¼å¼)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  å½“å‰æ¶æ„é—®é¢˜:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  âŒ 12 ä¸ªæ–‡ä»¶ç›´æ¥ä½¿ç”¨ scipy ç»Ÿè®¡                             â”‚   â”‚
â”‚  â”‚  âŒ 48 å¤„æœ¬åœ° pandas rolling/shift/ewm æ“ä½œ                   â”‚   â”‚
â”‚  â”‚  âŒ Agent å±‚å­˜åœ¨ç‹¬ç«‹çš„é£é™©è®¡ç®—å¼•æ“                            â”‚   â”‚
â”‚  â”‚  âŒ DataProvider ç»•è¿‡ Qlib DataHandler                        â”‚   â”‚
â”‚  â”‚  âŒ æ²™ç®±å…è®¸ä»»æ„ numpy/scipy ä»£ç                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸€ã€å„å±‚åˆè§„æ€§è¯„åˆ†

| å±‚çº§ | æ¨¡å—æ•° | è¯„åˆ† | çŠ¶æ€ | ä¸»è¦é—®é¢˜ |
|------|--------|------|------|----------|
| **å› å­è®¡ç®—å±‚** | 10 | 35/100 | ğŸ”´ CRITICAL | 619ä¸ªå› å­ä½¿ç”¨ scipy |
| **æ ¸å¿ƒå¼•æ“å±‚** | 6 | 52/100 | ğŸŸ¡ WARNING | è™šå‡ Qlib é›†æˆ |
| **Agent å±‚** | 7 | 72/100 | ğŸŸ¡ WARNING | 2ä¸ªAgentè¿è§„ |
| **æ•°æ®å±‚** | 4 | 62/100 | ğŸŸ¡ WARNING | ç»•è¿‡ Qlib DataHandler |
| **API å±‚** | 3 | 25/100 | ğŸ”´ CRITICAL | ç›´æ¥ä½¿ç”¨ scipy |

---

## äºŒã€CRITICAL çº§åˆ«é—®é¢˜ (ç«‹å³ä¿®å¤)

### 2.1 å› å­åº“ - å…¨éƒ¨ä½¿ç”¨ scipy (619ä¸ªå› å­)

| æ–‡ä»¶ | è¡Œæ•° | å› å­æ•° | scipy ç”¨æ³• |
|------|------|--------|------------|
| `alpha101.py` | 1183 | 101 | `scipy.stats.rankdata` |
| `alpha158.py` | 1418 | 158 | `scipy.stats.percentileofscore` |
| `alpha360.py` | 2155 | 360 | `scipy.stats.percentileofscore` |

**é—®é¢˜ä»£ç ç¤ºä¾‹** (`alpha101.py:25-39`):
```python
from scipy.stats import rankdata  # âŒ è¿ååŸåˆ™

def ts_rank(series: pd.Series, window: int) -> pd.Series:
    def rank_pct(x):
        ranked = rankdata(x, nan_policy='omit')  # âŒ scipy ç›´æ¥è°ƒç”¨
        return ranked[-1] / len(x[~np.isnan(x)])
    return series.rolling(window).apply(rank_pct, raw=True)
```

**åº”æ”¹ä¸º**: ä½¿ç”¨ Qlib çš„ `Rank` è¡¨è¾¾å¼æ“ä½œç¬¦

---

### 2.2 æ ¸å¿ƒè¯„ä¼°æ¨¡å— - scipy ä¾èµ–

| æ–‡ä»¶ | ä¸¥é‡æ€§ | scipy ç”¨æ³• |
|------|--------|------------|
| `redundancy_detector.py` | HIGH | `linkage`, `fcluster`, `squareform`, `spearmanr` |
| `ic_decomposition.py` | HIGH | `linregress`, `ttest_ind` |
| `stability_analyzer.py` | HIGH | `linregress` |
| `alpha_benchmark.py` | HIGH | `spearmanr` |
| `factor_evaluator.py` | MEDIUM | numpy fallback |

---

### 2.3 API æœåŠ¡å±‚ - scipy ä¾èµ–

**æ–‡ä»¶**: `api/factors/service.py`

```python
# ç¬¬ 1035, 1053, 1548 è¡Œ
from scipy import stats  # âŒ åœ¨ API å±‚ç›´æ¥ä½¿ç”¨ç»Ÿè®¡åº“
```

---

### 2.4 å›æµ‹å¼•æ“ - æœªä½¿ç”¨ Qlib Backtest

**æ–‡ä»¶**: `core/backtest_engine.py` (è¯„åˆ†: 15/100)

**é—®é¢˜**:
- æ€§èƒ½æŒ‡æ ‡å…¨éƒ¨æœ¬åœ°å®ç°ï¼ˆSharpe, MaxDrawdown, Sortino ç­‰ï¼‰
- æœªä½¿ç”¨ Qlib çš„ `backtest` æ¨¡å—
- ä»£ç é‡å¤

---

### 2.5 æ²™ç®±è®¾è®¡ç¼ºé™·

**æ–‡ä»¶**: `core/sandbox.py` (è¯„åˆ†: 0/100)

```python
# ç¬¬ 56-79 è¡Œ - å…è®¸ç»•è¿‡ Qlib çš„åº“
allowed_modules = [
    "pandas",    # âŒ åº”è¯¥ç¦æ­¢
    "numpy",     # âŒ åº”è¯¥ç¦æ­¢
    "scipy",     # âŒ åº”è¯¥ç¦æ­¢
]
```

**å½±å“**: LLM ç”Ÿæˆçš„å› å­ä»£ç å¯ä»¥å®Œå…¨ç»•è¿‡ Qlib

---

## ä¸‰ã€HIGH çº§åˆ«é—®é¢˜ (æœ¬å‘¨ä¿®å¤)

### 3.1 Agent å±‚ - ç‹¬ç«‹è®¡ç®—æ¨¡å—

| Agent | è¯„åˆ† | é—®é¢˜ |
|-------|------|------|
| `risk_agent.py` | 1/5 | å®Œæ•´çš„ `RiskCalculator` ç±» (272-380è¡Œ) |
| `backtest_agent.py` | 2/5 | `_calculate_metrics_manually()` (527-582è¡Œ) |
| `strategy_agent.py` | 3/5 | ä¿¡å·å¤„ç†å¯ä¼˜åŒ– |

**risk_agent.py è¿è§„ä»£ç **:
```python
class RiskCalculator:  # âŒ åº”è¯¥ä½¿ç”¨ Qlib risk_analysis
    def calculate_var(self, returns, confidence=0.95):
        return float(-np.percentile(returns, (1 - confidence) * 100))

    def calculate_expected_shortfall(self, returns, confidence=0.95):
        var = self.calculate_var(returns, confidence)
        tail_returns = returns[returns < -var]
        return float(-tail_returns.mean())
```

---

### 3.2 æ ¸å¿ƒå¼•æ“ - è™šå‡ Qlib é›†æˆ

**æ–‡ä»¶**: `core/factor_engine.py` (è¯„åˆ†: 60/100)

**é—®é¢˜**: å­˜åœ¨æœ¬åœ°æ“ä½œç¬¦å®ç° (611-726è¡Œ)

```python
# åº”è¯¥å§”æ‰˜ç»™ Qlibï¼Œä½†å®é™…ä¸Šæ˜¯æœ¬åœ°å®ç°
def _op_mean(self, df, inner, window):
    return val.rolling(int(window)).mean()  # âŒ pandas æ“ä½œ

def _op_std(self, df, inner, window):
    return val.rolling(int(window)).std()   # âŒ pandas æ“ä½œ

def _op_rsi(self, df, inner, window):
    delta = val.diff()  # âŒ pandas æ“ä½œ
    gain = delta.where(delta > 0, 0).rolling(int(window)).mean()
    ...
```

---

### 3.3 æ•°æ®å±‚ - ç»•è¿‡ Qlib DataHandler

**æ–‡ä»¶**: `core/data_provider.py` (è¯„åˆ†: 20/100)

```python
# ç›´æ¥æŸ¥è¯¢æ•°æ®åº“ï¼Œç»•è¿‡ Qlib
async def _load_from_db(...):
    query = select(OHLCVDataORM).where(...)  # âŒ ç›´æ¥ SQLAlchemy
    result = await self._session.execute(query)
```

**æ–‡ä»¶**: `core/qlib_crypto.py:683-721`

```python
# ä¸¥é‡è¿è§„ï¼šç›´æ¥è°ƒç”¨ CCXT
@staticmethod
def from_exchange(exchange, symbol, timeframe, limit):
    import ccxt  # âŒ åº”è¯¥é€šè¿‡ CCXTDownloader
    ex = exchange_class()
    ohlcv = ex.fetch_ohlcv(symbol, timeframe, limit=limit)  # âŒ ç»•è¿‡ä¸‹è½½å™¨
```

---

## å››ã€å·²å®Œæˆçš„é‡æ„ (ä¹‹å‰ä¼šè¯)

### 4.1 åè¿‡æ‹Ÿåˆæ¨¡å— âœ…

| æ–‡ä»¶ | çŠ¶æ€ | æ”¹åŠ¨ |
|------|------|------|
| `qlib_stats.py` | âœ… æ–°å¢ | ç»Ÿä¸€ç»Ÿè®¡æ¥å£ |
| `research_ledger.py` | âœ… é‡æ„ | ä½¿ç”¨ `qlib_stats` |
| `cv_splitter.py` | âœ… é‡æ„ | ä½¿ç”¨ `QlibStatisticalEngine` |
| `walk_forward_validator.py` | âœ… é‡æ„ | ç§»é™¤ scipy |

---

## äº”ã€ä¿®å¤ä¼˜å…ˆçº§çŸ©é˜µ

### Priority 1: ç´§æ€¥ä¿®å¤ (1-2å¤©)

| ä»»åŠ¡ | æ–‡ä»¶ | å½±å“ | å·¥ä½œé‡ |
|------|------|------|--------|
| ç»Ÿä¸€å› å­æ’åºå®ç° | alpha101/158/360.py | 619ä¸ªå› å­ | é«˜ |
| ç§»é™¤ sandbox scipy è®¿é—® | sandbox.py | å®‰å…¨æ€§ | ä½ |
| API å±‚ç§»é™¤ scipy | factors/service.py | API ç¨³å®šæ€§ | ä¸­ |

### Priority 2: æœ¬å‘¨ä¿®å¤ (3-5å¤©)

| ä»»åŠ¡ | æ–‡ä»¶ | å½±å“ | å·¥ä½œé‡ |
|------|------|------|--------|
| RiskCalculator â†’ Qlib | risk_agent.py | é£é™©è®¡ç®—ä¸€è‡´æ€§ | ä¸­ |
| å›æµ‹æŒ‡æ ‡ â†’ Qlib | backtest_agent.py | å›æµ‹ç»“æœä¸€è‡´æ€§ | ä¸­ |
| èšç±»åˆ†æ â†’ Qlib | redundancy_detector.py | å†—ä½™æ£€æµ‹ | é«˜ |
| IC åˆ†æ â†’ Qlib | ic_decomposition.py | IC åˆ†è§£ | ä¸­ |

### Priority 3: ä¸‹å‘¨ä¿®å¤ (5-10å¤©)

| ä»»åŠ¡ | æ–‡ä»¶ | å½±å“ | å·¥ä½œé‡ |
|------|------|------|--------|
| ç»Ÿä¸€è¡¨è¾¾å¼æ±‚å€¼ | factor_engine.py | å› å­è®¡ç®— | é«˜ |
| DataHandler é›†æˆ | data_provider.py | æ•°æ®åŠ è½½ | é«˜ |
| ç§»é™¤ from_exchange | qlib_crypto.py | æ•°æ®ä¸€è‡´æ€§ | ä½ |

---

## å…­ã€å…³é”®æŒ‡æ ‡ç»Ÿè®¡

### 6.1 scipy ä½¿ç”¨æƒ…å†µ

```
æ€» scipy å¯¼å…¥: 12 ä¸ªæ–‡ä»¶
  - evaluation/: 8 ä¸ªæ–‡ä»¶
  - core/: 2 ä¸ªæ–‡ä»¶
  - api/: 1 ä¸ªæ–‡ä»¶
  - models/: 1 ä¸ªæ–‡ä»¶

ä¸»è¦ç”¨æ³•:
  - stats.spearmanr: 6 å¤„ (IC è®¡ç®—)
  - stats.percentileofscore: 4 å¤„ (æ’åº)
  - stats.linregress: 3 å¤„ (è¶‹åŠ¿åˆ†æ)
  - stats.rankdata: 1 å¤„ (æ’åº)
  - cluster.linkage/fcluster: 2 å¤„ (èšç±»)
```

### 6.2 Qlib ä½¿ç”¨æƒ…å†µ

```
å¯¼å…¥ Qlib çš„æ–‡ä»¶: 11 ä¸ª
  - qlib_stats.py âœ…
  - alpha_benchmark.py (éƒ¨åˆ†)
  - qlib_factor_library.py âœ…
  - qlib_crypto.py (éƒ¨åˆ†)
  - factor_evaluator.py (éƒ¨åˆ†)
  - backtest_agent.py (éƒ¨åˆ†)
  - config/service.py
  - factor_engine.py (éƒ¨åˆ†)
  - qlib_init.py âœ…
  - strategy/generator.py
  - qlib_crypto/__init__.py

Qlib è¡¨è¾¾å¼å¼•æ“ä½¿ç”¨ç‡: ~15%
D.features() ä½¿ç”¨ç‡: <5%
```

### 6.3 æœ¬åœ° pandas æ“ä½œ

```
æ€»è®¡: 48 å¤„è¿è§„

æ“ä½œç±»å‹åˆ†å¸ƒ:
  - rolling(): 24 å¤„
  - shift(): 6 å¤„
  - ewm(): 4 å¤„
  - diff(): 5 å¤„
  - pct_change(): 4 å¤„
  - cumsum()/cummax(): 5 å¤„
```

---

## ä¸ƒã€ç›®æ ‡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç›®æ ‡ï¼š100% Qlib æ ¸å¿ƒ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1. å› å­å®šä¹‰ (Alpha è¡¨è¾¾å¼)                                          â”‚
â”‚     Alpha("Rank(Mean($close, 5) / Mean($close, 20))")               â”‚
â”‚                                                                      â”‚
â”‚  2. å› å­è®¡ç®— (D.features)                                            â”‚
â”‚     df = D.features(instruments, expressions, start, end)           â”‚
â”‚                                                                      â”‚
â”‚  3. é£é™©åˆ†æ (risk_analysis)                                         â”‚
â”‚     metrics = risk_analysis(returns_series)                         â”‚
â”‚                                                                      â”‚
â”‚  4. å›æµ‹æ‰§è¡Œ (Backtest)                                              â”‚
â”‚     portfolio, indicators = backtest(strategy, account)             â”‚
â”‚                                                                      â”‚
â”‚  5. æ•°æ®åŠ è½½ (DataHandler)                                           â”‚
â”‚     handler = CryptoDataHandler(instruments, start, end)            â”‚
â”‚                                                                      â”‚
â”‚  ç¦æ­¢:                                                               â”‚
â”‚  âŒ scipy.stats.* (ç§»é™¤)                                             â”‚
â”‚  âŒ pandas.rolling/shift/ewm ç›´æ¥ç»Ÿè®¡ (é€šè¿‡ Qlib)                    â”‚
â”‚  âŒ numpy ç»Ÿè®¡æ“ä½œ (é€šè¿‡ qlib_stats)                                 â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…«ã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### 8.1 ç«‹å³æ‰§è¡Œ

1. **åˆ›å»º Qlib å› å­æ’åºå‡½æ•°** - æ›¿æ¢ `scipy.stats.rankdata`
2. **æ‰©å±• qlib_stats.py** - æ·»åŠ  Spearman ç›¸å…³ã€çº¿æ€§å›å½’ã€èšç±»
3. **ä¿®æ”¹ sandbox.py** - ç§»é™¤ pandas/numpy/scipy ç›´æ¥è®¿é—®

### 8.2 æœ¬å‘¨æ‰§è¡Œ

1. **é‡æ„ alpha101/158/360** - ä½¿ç”¨ Qlib Alpha è¡¨è¾¾å¼
2. **é‡æ„ risk_agent** - ç§»é™¤ RiskCalculator
3. **é‡æ„ backtest_agent** - ä½¿ç”¨ Qlib å›æµ‹

### 8.3 ä¸‹å‘¨æ‰§è¡Œ

1. **ç»Ÿä¸€ factor_engine** - ç§»é™¤æœ¬åœ°æ“ä½œç¬¦
2. **é›†æˆ DataHandler** - æ›¿ä»£ DataProvider
3. **æ·»åŠ æ¶æ„éªŒè¯ CI** - é˜²æ­¢ scipy å›å½’

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-12-20
**å®¡è®¡å·¥å…·**: Claude Code é™æ€åˆ†æ + 4ä¸ªå¹¶è¡Œ Agent
**å»ºè®®**: æŒ‰ä¼˜å…ˆçº§æ‰§è¡Œä¿®å¤ï¼Œé¢„è®¡ 2-3 å‘¨å®Œæˆå…¨éƒ¨æ•´æ”¹
