# Trading System V2 vs V3 å‰ç«¯åŠŸèƒ½å¯¹æ¯”

**æ—¥æœŸ**: 2025-12-10
**ç›®çš„**: åˆ†æ v2 å‰ç«¯åŠŸèƒ½ï¼Œåˆ¶å®š v3 è¿ç§»/å®ç°è®¡åˆ’

---

## ä¸€ã€é¡µé¢ç»“æ„å¯¹æ¯”

### V2 å‰ç«¯ (8 ä¸ªé¡µé¢)
| é¡µé¢ | æ–‡ä»¶ | ä»£ç è¡Œæ•° | ä¸»è¦åŠŸèƒ½ |
|------|------|---------|---------|
| Monitor | MonitorPage.tsx | ~427 | ç³»ç»Ÿç›‘æ§ä»ªè¡¨æ¿ |
| Data Center | DataCenterPage.tsx | ~655 | TimescaleDB æ•°æ®ç®¡ç† |
| Factor Mining | FactorMiningPage.tsx | ~1085 | RD-Agent å› å­æŒ–æ˜ |
| Factor Library | FactorLibraryPage.tsx | ~189 | å› å­æµè§ˆä¸é€‰æ‹© |
| Strategy Workshop | StrategyWorkshopPage.tsx | ~238 | ç­–ç•¥è§„åˆ™æ„å»ºå™¨ |
| Backtest Center | BacktestCenterPage.tsx | ~343 | å›æµ‹ç®¡ç†ä¸­å¿ƒ |
| Trading Terminal | TradingTerminalPage.tsx | ~217 | CEX/DEX äº¤æ˜“ç»ˆç«¯ |
| Settings Center | SettingsCenterPage.tsx | ~955 | ç³»ç»Ÿé…ç½®ä¸­å¿ƒ |

### V3 å‰ç«¯ (7 ä¸ªé¡µé¢)
| é¡µé¢ | æ–‡ä»¶ | ä»£ç è¡Œæ•° | ä¸»è¦åŠŸèƒ½ |
|------|------|---------|---------|
| Dashboard | DashboardPage.tsx | ~83 | ç®€å•æ¦‚è§ˆ (é™æ€æ•°æ®) |
| Agent Monitor | AgentMonitorPage.tsx | å¾…æŸ¥ | Agent çŠ¶æ€ç›‘æ§ |
| Factor Explorer | FactorExplorerPage.tsx | ~313 | å› å­æµè§ˆ (å·²å®ç°) |
| Research Ledger | ResearchLedgerPage.tsx | å¾…æŸ¥ | ç ”ç©¶è´¦æœ¬ |
| Live Trading | LiveTradingPage.tsx | ~206 | å®ç›˜ç›‘æ§ (æŒä»“/é£æ§) |
| Pipeline | PipelinePage.tsx | å¾…æŸ¥ | æµæ°´çº¿ç®¡ç† |
| Settings | SettingsPage.tsx | ~51 | åŸºç¡€è®¾ç½® (ä»…ä¸»é¢˜åˆ‡æ¢) |

---

## äºŒã€åŠŸèƒ½å·®è·åˆ†æ

### ğŸ”´ V3 å®Œå…¨ç¼ºå¤±çš„æ ¸å¿ƒåŠŸèƒ½

#### 1. Data Center æ•°æ®ä¸­å¿ƒ (v2: ~655 è¡Œ)
**V2 åŠŸèƒ½**:
- TimescaleDB è¿æ¥çŠ¶æ€ç›‘æ§
- OHLCV æ•°æ®ä¸‹è½½ä»»åŠ¡ç®¡ç†
- å¤šå¸ç§é€‰æ‹© (BTC, ETH, SOL, etc.)
- æ•°æ®æ‰©å±•åŠŸèƒ½ (å»¶é•¿å†å²æ•°æ®)
- ä¸‹è½½ä»»åŠ¡è¿›åº¦å®æ—¶è·Ÿè¸ª
- æ•°æ®é¢„è§ˆåŠŸèƒ½

**V3 çŠ¶æ€**: âŒ å®Œå…¨ç¼ºå¤±

**å®ç°ä¼˜å…ˆçº§**: ğŸ”´ é«˜ - å› å­æŒ–æ˜çš„æ•°æ®åŸºç¡€

---

#### 2. Factor Mining å› å­æŒ–æ˜ (v2: ~1085 è¡Œ)
**V2 åŠŸèƒ½**:
- RD-Agent å¤šä»»åŠ¡å¹¶è¡Œå› å­å‘ç°
- ä»»åŠ¡æ§åˆ¶ (åˆ›å»º/æš‚åœ/æ¢å¤/åœæ­¢)
- å‡è®¾ç”Ÿæˆä¸è·Ÿè¸ª
- å®æ—¶æ—¥å¿—æµ
- å› å­æ€§èƒ½æŒ‡æ ‡å®æ—¶æ˜¾ç¤º
- CoSTEER é…ç½®é›†æˆ

**V3 çŠ¶æ€**: âŒ å®Œå…¨ç¼ºå¤±

**å®ç°ä¼˜å…ˆçº§**: ğŸ”´ é«˜ - ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½

---

#### 3. Strategy Workshop ç­–ç•¥å·¥ä½œåŠ (v2: ~238 è¡Œ)
**V2 åŠŸèƒ½**:
- 4 æ­¥ç­–ç•¥æ„å»ºå‘å¯¼
  1. Select Factors (é€‰æ‹©å› å­)
  2. Filter Rules (è¿‡æ»¤è§„åˆ™)
  3. Weight Rules (æƒé‡è§„åˆ™)
  4. Risk Control (é£æ§å‚æ•°)
- ä¸ Factor Library é›†æˆ
- å¯è§†åŒ–è§„åˆ™ç¼–è¾‘å™¨

**V3 çŠ¶æ€**: âŒ å®Œå…¨ç¼ºå¤±

**å®ç°ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ - ä¾èµ–å› å­åº“

---

#### 4. Backtest Center å›æµ‹ä¸­å¿ƒ (v2: ~343 è¡Œ)
**V2 åŠŸèƒ½**:
- å›æµ‹ä»»åŠ¡ç®¡ç† (åˆ›å»º/åˆ é™¤)
- ç­–ç•¥ç±»å‹é€‰æ‹©
- æ—¶é—´èŒƒå›´é…ç½®
- å›æµ‹ç»“æœå±•ç¤º
  - Total Return
  - Sharpe Ratio
  - Max Drawdown
  - Win Rate
  - Profit Factor
- ç»Ÿè®¡æ¦‚è§ˆ

**V3 çŠ¶æ€**: âŒ å®Œå…¨ç¼ºå¤±

**å®ç°ä¼˜å…ˆçº§**: ğŸ”´ é«˜ - ç­–ç•¥éªŒè¯å¿…éœ€

---

### ğŸŸ¡ V3 éƒ¨åˆ†å®ç°çš„åŠŸèƒ½

#### 5. Settings Center é…ç½®ä¸­å¿ƒ
**V2 åŠŸèƒ½** (~955 è¡Œ):
- LLM é…ç½® (OpenRouter API Key, Model é€‰æ‹©)
- Exchange é…ç½® (Binance API Key/Secret)
- RD-Agent é…ç½®
  - Crypto Data é…ç½® (é¢‘ç‡/éªŒè¯)
  - å®éªŒé…ç½® (æ¨¡å‹/å› å­é›†/æ•°æ®åˆ†å‰²)
  - CoSTEER å‚æ•°
  - è¶…å‚æ•°è°ƒæ•´
- ç³»ç»Ÿè®¾ç½®

**V3 åŠŸèƒ½** (~51 è¡Œ):
- ä»…ä¸»é¢˜åˆ‡æ¢

**ç¼ºå¤±**: LLM/Exchange/RD-Agent å…¨éƒ¨é…ç½®ç•Œé¢

**å®ç°ä¼˜å…ˆçº§**: ğŸ”´ é«˜ - ç³»ç»Ÿé…ç½®å…¥å£

---

#### 6. Trading Terminal äº¤æ˜“ç»ˆç«¯
**V2 åŠŸèƒ½** (~217 è¡Œ):
- CEX/DEX åŒæ¨¡å¼åˆ‡æ¢
- äº¤æ˜“æ‰€é€‰æ‹©
- ä»·æ ¼å›¾è¡¨å ä½
- è®¢å•è¡¨å• (ç±»å‹/ä»·æ ¼/æ•°é‡)
- è®¢å•ç°¿å ä½
- æŒä»“åˆ—è¡¨

**V3 åŠŸèƒ½** (LiveTradingPage ~206 è¡Œ):
- å®ç›˜ç›‘æ§ (æŒä»“/PnL)
- é£æ§çŠ¶æ€
- ç´§æ€¥å¹³ä»“

**å·®å¼‚**: V2 ä¾§é‡äº¤æ˜“æ‰§è¡Œï¼ŒV3 ä¾§é‡æŒä»“ç›‘æ§

**å®ç°ä¼˜å…ˆçº§**: ğŸŸ¢ ä½ - å¯åæœŸæ‰©å±•

---

#### 7. Monitor ç³»ç»Ÿç›‘æ§
**V2 åŠŸèƒ½** (~427 è¡Œ):
- RD-Agent çŠ¶æ€
- é£é™©æŒ‡æ ‡
- é…ç½®çŠ¶æ€ (LLM/Exchange/Qlib)
- æ•°æ®ç®¡é“çŠ¶æ€
- å·¥ä½œæµè¿›åº¦

**V3 åŠŸèƒ½** (AgentMonitorPage):
- Agent çŠ¶æ€å¡ç‰‡
- LLM æŒ‡æ ‡
- ä»»åŠ¡é˜Ÿåˆ—
- èµ„æºä½¿ç”¨

**å·®å¼‚**: V2 æ›´å…¨é¢ï¼ŒV3 ä¸“æ³¨ Agent

**å®ç°ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ - å·²æœ‰åŸºç¡€

---

### ğŸŸ¢ V3 å·²å®ç°çš„åŠŸèƒ½

#### 8. Factor Explorer / Library
**V2 åŠŸèƒ½** (~189 è¡Œ):
- å› å­åˆ—è¡¨
- åˆ†ç±»ç­›é€‰
- é€‰æ‹©åŠŸèƒ½
- ç®€å•æŒ‡æ ‡å±•ç¤º

**V3 åŠŸèƒ½** (~313 è¡Œ):
- å®Œå–„çš„ç­›é€‰ç³»ç»Ÿ
- æœç´¢åŠŸèƒ½
- ç½‘æ ¼/åˆ—è¡¨è§†å›¾åˆ‡æ¢
- è¯¦æƒ…é¢æ¿
- ç»Ÿè®¡å¡ç‰‡

**è¯„ä¼°**: âœ… V3 åŠŸèƒ½æ›´å®Œå–„

---

## ä¸‰ã€åç«¯ API å·®è·

### V2 åç«¯ API (config.api.ts)
```typescript
// å·²æœ‰çš„ API
configApi.getStatus()           // é…ç½®çŠ¶æ€
configApi.getModels()           // å¯ç”¨æ¨¡å‹
configApi.getAPIKeys()          // ä¿å­˜çš„ API Keys
configApi.setAPIKeys()          // è®¾ç½® API Keys
configApi.testLLM()             // æµ‹è¯• LLM
configApi.testExchange()        // æµ‹è¯•äº¤æ˜“æ‰€
configApi.getCryptoDataConfig() // Crypto æ•°æ®é…ç½®
configApi.setCryptoDataConfig()
configApi.getRDAgentExperimentConfig()
configApi.setRDAgentExperimentConfig()

// å›æµ‹ API
backtestApi.list()
backtestApi.get(id)
backtestApi.run(config)
backtestApi.delete(id)

// ç­–ç•¥ API
strategyApi.getTemplates()
```

### V3 åç«¯ API (å·²å®ç°)
```typescript
// å› å­ API
factorsApi.list()
factorsApi.get(id)
factorsApi.create()
factorsApi.evaluate(id)
factorsApi.getMetrics(id)
factorsApi.getStability(id)

// ç ”ç©¶ API
researchApi.getLedger()
researchApi.getStatistics()
researchApi.getThresholdHistory()
researchApi.newTrial()

// ç³»ç»Ÿ API
systemApi.getStatus()
systemApi.getResources()
systemApi.getLLMMetrics()
```

### éœ€è¦æ–°å¢çš„ API
1. âŒ Config API (LLM/Exchange é…ç½®)
2. âŒ Data API (TimescaleDB æ•°æ®ç®¡ç†)
3. âŒ RD-Agent API (å› å­æŒ–æ˜ä»»åŠ¡)
4. âŒ Strategy API (ç­–ç•¥æ¨¡æ¿)
5. âŒ Backtest API (å›æµ‹ç®¡ç†)

---

## å››ã€å®ç°è®¡åˆ’

### Phase 1: é…ç½®åŸºç¡€è®¾æ–½ (ä¼˜å…ˆçº§: ğŸ”´ é«˜)
**ç›®æ ‡**: è®©ç³»ç»Ÿå¯é…ç½®ã€å¯è¿è¡Œ

| ä»»åŠ¡ | å·¥ä½œé‡ | ä¾èµ– |
|------|--------|------|
| 1.1 Settings Page é‡æ„ | 2-3h | æ—  |
| 1.2 Config API åç«¯ | 2-3h | æ—  |
| 1.3 LLM é…ç½®ç•Œé¢ | 1-2h | 1.1, 1.2 |
| 1.4 Exchange é…ç½®ç•Œé¢ | 1-2h | 1.1, 1.2 |

**é¢„è®¡æ€»å·¥æ—¶**: 6-10h

---

### Phase 2: æ•°æ®ç®¡ç† (ä¼˜å…ˆçº§: ğŸ”´ é«˜)
**ç›®æ ‡**: å»ºç«‹æ•°æ®åŸºç¡€è®¾æ–½

| ä»»åŠ¡ | å·¥ä½œé‡ | ä¾èµ– |
|------|--------|------|
| 2.1 Data Center é¡µé¢ | 3-4h | æ—  |
| 2.2 Data API åç«¯ | 3-4h | æ—  |
| 2.3 TimescaleDB çŠ¶æ€é›†æˆ | 2h | 2.2 |
| 2.4 ä¸‹è½½ä»»åŠ¡ç®¡ç† | 2-3h | 2.1, 2.2 |

**é¢„è®¡æ€»å·¥æ—¶**: 10-13h

---

### Phase 3: å› å­æŒ–æ˜ (ä¼˜å…ˆçº§: ğŸ”´ é«˜)
**ç›®æ ‡**: æ ¸å¿ƒå› å­æŒ–æ˜åŠŸèƒ½

| ä»»åŠ¡ | å·¥ä½œé‡ | ä¾èµ– |
|------|--------|------|
| 3.1 Factor Mining é¡µé¢ | 4-5h | Phase 2 |
| 3.2 RD-Agent API åç«¯ | 4-5h | æ—  |
| 3.3 ä»»åŠ¡æ§åˆ¶ç³»ç»Ÿ | 2-3h | 3.1, 3.2 |
| 3.4 å®æ—¶æ—¥å¿—æµ | 2-3h | 3.1 |
| 3.5 CoSTEER é…ç½®ç•Œé¢ | 2h | Phase 1 |

**é¢„è®¡æ€»å·¥æ—¶**: 14-18h

---

### Phase 4: ç­–ç•¥ä¸å›æµ‹ (ä¼˜å…ˆçº§: ğŸŸ¡ ä¸­)
**ç›®æ ‡**: ç­–ç•¥æ„å»ºä¸éªŒè¯

| ä»»åŠ¡ | å·¥ä½œé‡ | ä¾èµ– |
|------|--------|------|
| 4.1 Strategy Workshop é¡µé¢ | 3-4h | Phase 3 |
| 4.2 Backtest Center é¡µé¢ | 3-4h | æ—  |
| 4.3 Backtest API åç«¯ | 3-4h | æ—  |
| 4.4 å›æµ‹ç»“æœå¯è§†åŒ– | 2-3h | 4.2, 4.3 |

**é¢„è®¡æ€»å·¥æ—¶**: 11-15h

---

### Phase 5: ç›‘æ§å¢å¼º (ä¼˜å…ˆçº§: ğŸŸ¢ ä½)
**ç›®æ ‡**: å®Œå–„ç³»ç»Ÿç›‘æ§

| ä»»åŠ¡ | å·¥ä½œé‡ | ä¾èµ– |
|------|--------|------|
| 5.1 Dashboard æ•°æ®é›†æˆ | 2-3h | Phase 1-4 |
| 5.2 Monitor é¡µé¢å¢å¼º | 2-3h | æ—  |
| 5.3 æ•°æ®ç®¡é“çŠ¶æ€ | 1-2h | Phase 2 |

**é¢„è®¡æ€»å·¥æ—¶**: 5-8h

---

## äº”ã€æ€»ç»“

### åŠŸèƒ½å®Œæ•´åº¦å¯¹æ¯”
| æ¨¡å— | V2 | V3 | å·®è· |
|------|-----|-----|-----|
| é…ç½®ç®¡ç† | âœ… å®Œæ•´ | âŒ åŸºç¡€ | 90% |
| æ•°æ®ç®¡ç† | âœ… å®Œæ•´ | âŒ ç¼ºå¤± | 100% |
| å› å­æŒ–æ˜ | âœ… å®Œæ•´ | âŒ ç¼ºå¤± | 100% |
| å› å­åº“ | âœ… åŸºç¡€ | âœ… å®Œå–„ | -20% (V3æ›´å¥½) |
| ç­–ç•¥æ„å»º | âœ… å®Œæ•´ | âŒ ç¼ºå¤± | 100% |
| å›æµ‹ä¸­å¿ƒ | âœ… å®Œæ•´ | âŒ ç¼ºå¤± | 100% |
| äº¤æ˜“ç»ˆç«¯ | âœ… å®Œæ•´ | ğŸŸ¡ éƒ¨åˆ† | 60% |
| ç³»ç»Ÿç›‘æ§ | âœ… å®Œæ•´ | ğŸŸ¡ éƒ¨åˆ† | 40% |

### æ€»å·¥æ—¶ä¼°ç®—
- Phase 1 (é…ç½®): 6-10h
- Phase 2 (æ•°æ®): 10-13h
- Phase 3 (æŒ–æ˜): 14-18h
- Phase 4 (ç­–ç•¥): 11-15h
- Phase 5 (ç›‘æ§): 5-8h

**æ€»è®¡**: 46-64 å°æ—¶

### æ¨èæ‰§è¡Œé¡ºåº
1. **Phase 1** â†’ è®©ç³»ç»Ÿå¯é…ç½®
2. **Phase 2** â†’ å‡†å¤‡æ•°æ®åŸºç¡€
3. **Phase 3** â†’ å®ç°æ ¸å¿ƒåŠŸèƒ½
4. **Phase 4** â†’ å®Œæˆç­–ç•¥é—­ç¯
5. **Phase 5** â†’ é”¦ä¸Šæ·»èŠ±
