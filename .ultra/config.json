{
  "version": "4.2",
  "project": {
    "name": "trading-system-v3",
    "displayName": "IQFMP - 智能量化因子挖掘平台",
    "type": ["api", "fullstack"],
    "stack": [
      "Python 3.12",
      "Qlib (研究内核)",
      "LangGraph + LangChain (Agent框架)",
      "FastAPI (API层)",
      "ccxt (交易执行)",
      "TimescaleDB (时序数据)",
      "Redis (缓存)",
      "Qdrant (向量数据库)",
      "Celery + RabbitMQ (任务队列)",
      "React + TypeScript (前端监控)",
      "Grafana + Prometheus (监控)"
    ],
    "created": "2025-12-09",
    "detectionContext": {
      "frameworks": {
        "frontend": ["React", "TypeScript"],
        "backend": ["Python", "FastAPI", "Qlib", "LangGraph"],
        "testing": ["pytest"],
        "buildTools": ["Vite"]
      },
      "packageManager": "pip + npm",
      "hasTests": false,
      "hasCI": false,
      "hasGit": false,
      "detectedStacks": [
        "Python Quantitative Trading",
        "LLM Agent System",
        "React Dashboard"
      ]
    }
  },
  "structure": "specs",

  "context": {
    "total_limit": 200000,
    "thresholds": {
      "green": 0.60,
      "yellow": 0.70,
      "orange": 0.85,
      "red": 0.95
    },
    "compression": {
      "trigger_task_count": 5,
      "target_ratio": 0.10,
      "archive_path": ".ultra/context-archive/"
    }
  },

  "quality_gates": {
    "test_coverage": {
      "overall": 0.85,
      "critical_paths": 1.00,
      "branch": 0.75,
      "function": 0.85
    },
    "code_quality": {
      "max_function_lines": 50,
      "max_nesting_depth": 3,
      "max_complexity": 10,
      "max_duplication_lines": 3
    },
    "quant_specific": {
      "min_ic_threshold": 0.03,
      "min_sharpe_ratio": 1.0,
      "max_drawdown": 0.20,
      "min_stability_score": 0.6,
      "overfitting_controls": {
        "multi_market_validation": true,
        "multi_timeframe_validation": true,
        "research_ledger_enabled": true,
        "deflated_sharpe_enabled": true
      }
    },
    "frontend": {
      "core_web_vitals": {
        "lcp_ms": 2500,
        "inp_ms": 200,
        "cls": 0.1
      }
    }
  },

  "git": {
    "branch_patterns": {
      "feature": "feat/task-{id}-{slug}",
      "bugfix": "fix/bug-{id}-{slug}",
      "refactor": "refactor/{slug}",
      "docs": "docs/{slug}",
      "test": "test/{slug}"
    },
    "commit": {
      "convention": "conventional-commits",
      "co_author": "Claude <noreply@anthropic.com>"
    },
    "workflow": {
      "strategy": "independent",
      "auto_branch_naming": true,
      "merge_strategy": "no-ff"
    }
  },

  "paths": {
    "tasks": ".ultra/tasks/tasks.json",
    "specs": {
      "product": ".ultra/specs/product.md",
      "architecture": ".ultra/specs/architecture.md"
    },
    "docs_legacy": {
      "prd": ".ultra/docs/prd.md",
      "tech": ".ultra/docs/tech.md"
    },
    "research": ".ultra/docs/research/",
    "decisions": ".ultra/docs/decisions/",
    "context_archive": ".ultra/context-archive/",
    "changes": ".ultra/changes/"
  },

  "tools": {
    "mcp": {
      "context7": true,
      "exa": true
    },
    "skills": {
      "guarding-code-quality": true,
      "guarding-test-coverage": true,
      "guarding-git-safety": true,
      "guarding-ui-design": true,
      "syncing-docs": true,
      "automating-e2e-tests": true,
      "compressing-context": true,
      "guiding-workflow": true,
      "enforcing-workflow": true
    }
  },

  "domain_specific": {
    "quant_trading": {
      "data_sources": ["Binance", "OKX"],
      "asset_types": ["crypto_perpetual", "crypto_spot"],
      "timeframes": ["1m", "5m", "15m", "1h", "4h", "1d"],
      "factor_families": [
        "trend_momentum",
        "volatility_risk",
        "liquidity",
        "derivatives_structure",
        "cross_asset_breadth",
        "sentiment"
      ],
      "anti_overfitting": {
        "cv_splitter": "CryptoCVSplitter",
        "research_ledger": true,
        "stability_analyzer": true,
        "factor_clustering": true
      }
    }
  }
}
